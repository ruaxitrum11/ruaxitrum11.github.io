  <%- include('../include/admin-header-top') %>


  <%- include('../include/admin-header') %>

  <%- include('../include/admin-sidebar') %>

  <style>
  .form-edit-user {
    width: 100%;
    float: left;
    margin-bottom: 20px;
    padding: 0 10%;
  }
  .form-edit-user span {
    float: left;
    width: 15%;
    font-size: 1.6rem;
    display: inline-block;
    padding-top: 10px;
  }
  .form-edit-user input {
    width: 40%;
    float: left;
    padding : 10px 0 10px 10px;
    border-radius: 5px;
    border : none;
  }
  .active {
    display: inline-block; 
    width: 80%;
    margin-bottom: 20px;
  }

  .active-block {
    margin-left: 15.1%;
  }
  input.status-active {
    width: 5%!important;
  }
  span.label {
    width: 20%!important;
    font-size: 94%!important;
  }
  div.button-active a {
    display: inline-block;
    font-size: 2rem;
    padding: 10px 30px;
    background-color: #dd4b39;
    color: #fff;
  }


</style>

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      Cập nhật tài khoản người dùng
    </h1>
  </section>

  <!-- Main content -->
  <section class="content ">

    <div class="container content-edit">     
      <form action="/admin/user/edit" id="form-edit" method="post" enctype="multipart/form-data">
        <div class = "form-edit-user">
          <span>Tài khoản</span>
          <input disabled="Block" type="text" name="userName" value="<%=user.userName%>" >
        </div>
        <div class = "form-edit-user">
          <span>Mật khẩu</span>
          <input disabled="Block" type="password" name="password" value="<%=user.password%>" >
        </div>
        <div class = "form-edit-user">
          <span>Email</span>
          <input type="text" name="email" value="<%=user.email%>">
        </div>
        <div class = "form-edit-user">
          <span>Số điện thoại</span>
          <input type="number" name="phoneNumber" value="<%=user.phoneNumber%>">
        </div>
        <div class = "form-edit-user">
          <span>Địa chỉ</span>
          <input type="text" name="address" value="<%=user.address%>">
        </div>
        <div class = "form-edit-user">
          <span>Ngày sinh</span>
          <input type="date" name="birthDay" value="<%=user.birthDay%>">
        </div>
        <div class = "form-edit-user">
          <span>Ảnh đại diện</span>
          <input type="file" name="file">
        </div>
        <div class = "form-edit-user">
          <span>Giới tính</span>
          <div class="active">
            <input class="status-active" type="radio" name="gender" value="0" <%if(user.gender == 0){%>checked<%}%>>
            <span class="label label-info">Nam</span>
          </div>
          <div class="active active-block">
            <input class="status-active" type="radio" name="gender" value="1" <%if(user.gender == 1){%>checked<%}%>>
            <span class="label label-info">Nữ</span>
          </div>
        </div>
        <div class = "form-edit-user">
          <span>Trạng thái</span>
          <div class="active">
            <input class="status-active" type="radio" name="status" value="1" <%if(user.status == 1){%>checked<%}%>>
            <span class="label label-success">Active</span>
          </div>
          <div class="active active-block">
            <input class="status-active" type="radio" name="status" value="0" <%if(user.status == 0){%>checked<%}%>>
            <span class="label label-danger">Block</span>
          </div>
        </div>
        <div class = "form-edit-user">
          <span>Cấp Bậc</span>
          <div class="active">
            <input class="status-active" type="radio" name="level" value="1" <%if(user.level == 1){%>checked<%}%>>
            <span class="label label-info">MemberShip</span>
          </div>
          <div class="active active-block">
            <input class="status-active" type="radio" name="level" value="2" <%if(user.level == 2){%>checked<%}%>>
            <span class="label label-info">Silver MemberShip</span>
          </div>
          <div class="active active-block">
            <input class="status-active" type="radio" name="level" value="3" <%if(user.level == 3){%>checked<%}%>>
            <span class="label label-info">Gold MemberShip</span>
          </div>
          <div class="active active-block">
            <input class="status-active" type="radio" name="level" value="4" <%if(user.level == 4){%>checked<%}%>>
            <span class="label label-info">Platinum MemberShip</span>
          </div>
        </div>
        <div class = "form-edit-user">
          <span>Quyền</span>
          <div class="active">
            <input class="status-active" type="radio" name="role" value="1" <%if(user.role == 1){%>checked<%}%>>
            <span class="label label-primary">Admin</span>
          </div>
          <div class="active active-block">
            <input class="status-active" type="radio" name="role" value="0" <%if(user.role == 0){%>checked<%}%>>
            <span class="label label-default">User</span>
          </div>
        </div>
        <input type="hidden" name="id" value="<%=user._id%>">
        <input type="hidden" name="_csrf" value="<%=token%>">
        <div class="form-edit-user button-active">
          <button type="submit">Cập Nhật</button>
        </div>
      </form>

    </div>

  </section>
  <!-- /.content -->
</div>
<!-- /.content-wrapper -->

<%- include('../include/admin-footer') %>

<%- include('../include/admin-control-sidebar') %>

<%- include('../include/admin-js.ejs') %>

<!-- <script type="text/javascript">


  function updateUser(id) {

    var new_email = $("input[name=email]").val();
    var new_phoneNumber = $("input[name=phoneNumber]").val();
    var new_address = $("input[name=address]").val();
    var new_birthDay = $("input[name=birthDay]").val().split('/');
    var new_year = new_birthDay[2];
    var new_month = new_birthDay[1];
    var new_day = new_birthDay[0];
    var new_gender = $("input[name=gender]:checked").val();
    var new_status =  $("input[name=status]:checked").val();
    var new_level = $("input[name=level]:checked").val();
    var new_role = $("input[name=role]:checked").val();
    var form = $('#form-edit')[0];
    var formData = new FormData(form);

    console.log(form);

    console.log(formData)
    console.log(FormData(form[]));

    $.ajax({
      url: '/admin/user/edit',
      type: 'post',
      id:id,
      data: {
        id : id,
        new_email : new_email.trim(),
        new_phoneNumber : new_phoneNumber,
        new_address : new_address,
        new_birthDay : new_birthDay,
        new_year : new_year,
        new_month : new_month,
        new_day : new_day,
        new_gender : new_gender,
        new_status : new_status,
        new_level : new_level,
        new_role : new_role 

      },
      data : formData,
      dataType: 'json',
      processData: false,
      contentType: false
    }).done(function(results){
      console.log(results);
      if (results.status == true) {
        $.alert({
          title: 'Thông Báo !',
          content: '<span class="text-success"><strong class="fa fa-check"></strong>Cập nhật thành công</span>'
        })

      }else{
        console.log(results)
        $.alert({
          title: 'Thông Báo !',
          content: '<span class="text-danger"><strong class="fa fa-close"></strong>'+results.errors+'</span>'
        })
        
      }

    })

  }



</script> -->